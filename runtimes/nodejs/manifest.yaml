# Wskdeploy manifest for openwhisk-cloudant-trigger
# GitHub repo is located at https://github.com/IBM/openwhisk-message-hub-trigger

# This manifest file reads the following env. variables:
#   TBD

project:
  name: todos
  inputs:
    CLOUDANT_USERNAME:
      type: string
      description: The username from the IBM Cloudant service credentials
      required: true
      value: username
    CLOUDANT_PASSWORD:
      type: string
      description: The password from the IBM Cloudant service credentials
      required: true
      value: password
packages:
  todo_package:
    version: 1.0
    license: Apache-2.0
    inputs:
      username:
          type: string
          description: CLOUDANT_USERNAME
          required: true
          value: $CLOUDANT_USERNAME
      password:
          type: string
          description: CLOUDANT_PASSWORD
          required: true
          value: $CLOUDANT_PASSWORD
    actions:
      get_todo:
        function: actions/get
        runtime: nodejs:8
        include:
           - ["actions/common/utils.js", "common/utils.js"]
        web-export: true
      delete_todo:
        function: actions/delete
        runtime: nodejs:8
        include:
           - ["actions/common/utils.js", "common/utils.js"]
        web-export: true
      post_todo:
        function: actions/post
        runtime: nodejs:8
        include:
           - ["actions/common/utils.js", "common/utils.js"]
        web-export: true
      patch_todo:
        function: actions/patch
        runtime: nodejs:8
        include:
           - ["actions/common/utils.js", "common/utils.js"]
        web-export: true
    apis:
      todos:
        /v1:
          /todo:
            get_todo:
              method: GET
              response: http
            delete_todo:
              method: DELETE
              response: http
            post_todo:
              method: POST
              response: http
            patch_todo:
              method: PATCH
              response: http
